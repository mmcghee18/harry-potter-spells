{"version":3,"sources":["data-viz/RadialChart.jsx","data/bookTitles.js","App.js","index.js"],"names":["Chart","styled","OrdinalFrame","props","$sticky","Tooltip","div","RadialChart","data","xAxis","yAxis","width","height","margin","sticky","frameProps","size","type","projection","oAccessor","rAccessor","rScaleType","scaleSqrt","oSort","a","b","aData","bData","pieceClass","d","myClass","toLowerCase","baseMarkProps","transitionDuration","default","renderKey","datapoint","spell","hoverAnnotation","tooltipContent","summary","bookTitles","1","2","3","4","5","6","7","GlobalStyle","createGlobalStyle","BookProgression","Multiples","ScrollamaWrapper","StepWrapper","MultipleWrapper","Title","h3","App","useState","book","setBook","useEffect","window","scrollTo","top","behavior","onStepEnter","offset","_","range","map","key","spells","innerWidth","innerHeight","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"6qBAOA,IAAMA,EAAQC,YAAOC,IAAPD,CAAH,KACG,SAACE,GAAD,OAAYA,EAAMC,QAAU,SAAW,QAC5C,SAACD,GAAD,OAAYA,EAAMC,QAAU,EAAI,QAGnCC,EAAUJ,IAAOK,IAAV,KAmEEC,EAvDK,SAAC,GAA2D,IAAzDC,EAAwD,EAAxDA,KAAMC,EAAkD,EAAlDA,MAAOC,EAA2C,EAA3CA,MAAOC,EAAoC,EAApCA,MAAOC,EAA6B,EAA7BA,OAAQC,EAAqB,EAArBA,OAAQC,EAAa,EAAbA,OAC1DC,EAAa,CAEjBP,OAGAQ,KAAM,CAACL,EAAOC,GACdC,OAAQA,GAAkB,IAG1BI,KAAM,MACNC,WAAY,SAGZC,UAAWV,EACXW,UAAWV,EACXW,WAAYC,sBACZC,MAAO,SAACC,EAAGC,EAAGC,EAAOC,GAAd,OAAwBA,EAAM,GAAGjB,GAASgB,EAAM,GAAGhB,IAG1DkB,WAAY,SAACC,GACX,IAAIC,EAAUD,EAAEZ,KAAKc,cAIrB,OAHIF,EAAEnB,GAAS,IACboB,GAAW,kBAENA,GAETE,cAAe,CACbC,mBAAoB,CAAEC,QAAS,MAEjCC,UAAW,SAACC,GAAD,OAAeA,EAAUC,OAGpCC,iBAAiB,EACjBC,eAAgB,SAACV,GAAD,OACd,kBAACxB,EAAD,KACGwB,EAAEW,QAAQ,GAAGhC,KAAKC,GADrB,MACgCoB,EAAEW,QAAQ,GAAGhC,KAAKE,MAgBtD,OAAO,kBAACV,EAAD,iBAAWe,EAAX,CAAuBX,QAASU,M,QClE1B2B,EAVI,CACjBC,EAAG,qDACHC,EAAG,uDACHC,EAAG,kDACHC,EAAG,mDACHC,EAAG,yDACHC,EAAG,sDACHC,EAAG,+C,qtCCCL,IAAMC,EAAcC,YAAH,KAkBXC,EAAkBlD,IAAOK,IAAV,KAKf8C,EAAYnD,IAAOK,IAAV,KAMT+C,EAAmBpD,IAAOK,IAAV,KAKhBgD,EAAcrD,IAAOK,IAAV,KAKXiD,EAAkBtD,IAAOK,IAAV,KAMfkD,EAAQvD,IAAOwD,GAAV,KA8DIC,MA1Df,WAAgB,IAAD,EACWC,mBAAS,MADpB,mBACNC,EADM,KACAC,EADA,KAYb,OARAC,qBAAU,WACRC,OAAOC,SAAS,CAAEC,IAAK,EAAGC,SAAU,aACnC,IAOD,oCACE,kBAACjB,EAAD,MACA,kBAACE,EAAD,KACE,kBAACE,EAAD,KACE,kBAAC,IAAD,CAAWc,YATC,SAAC,GAAc,IAAZ3D,EAAW,EAAXA,KACrBqD,EAAQrD,IAQmC4D,OAAQ,IAC1CC,IAAEC,MAAM,EAAG,GAAGC,KAAI,SAACX,GAAD,OACjB,kBAAC,IAAD,CAAMpD,KAAMoD,EAAMY,IAAKZ,GACrB,kBAACN,EAAD,KAAcM,SAKtB,6BACE,kBAAC,EAAD,CACEpD,KAAMiE,EAAOb,GACbnD,MAAO,QACPC,MAAO,WACPC,MAAOoD,OAAOW,WAAa,IAC3B9D,OAAQmD,OAAOY,YAAc,IAC7B7D,QAAQ,MAKd,kBAACsC,EAAD,KACGiB,IAAEC,MAAM,EAAG,GAAGC,KAAI,SAACX,GAAD,OACjB,kBAACL,EAAD,KACE,kBAACC,EAAD,CAAOgB,IAAG,gBAAWZ,IAASnB,EAAWmB,IACzC,kBAAC,EAAD,CACEY,IAAG,gBAAWZ,GACdpD,KAAMiE,EAAOb,GACbnD,MAAO,QACPC,MAAO,WACPC,MAAO,IACPC,OAAQ,IACRE,QAAQ,EACRD,OAAQ,YCtGtB+D,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,EAAD,OAEFC,SAASC,eAAe,U","file":"static/js/main.19fb5bfa.chunk.js","sourcesContent":["import React from \"react\";\nimport OrdinalFrame from \"semiotic/lib/OrdinalFrame\";\nimport styled from \"styled-components\";\nimport { scaleSqrt } from \"d3-scale\";\nimport \"./RadialChart.css\";\nimport _ from \"lodash\";\n\nconst Chart = styled(OrdinalFrame)`\n  position: ${(props) => (props.$sticky ? \"sticky\" : null)};\n  top: ${(props) => (props.$sticky ? 0 : null)};\n`;\n\nconst Tooltip = styled.div`\n  display: flex;\n  background-color: white;\n  color: black;\n  border-radius: 10px;\n  height: 80px;\n  width: 180px;\n  justify-content: center;\n  align-items: center;\n  padding: 5px;\n`;\n\nconst RadialChart = ({ data, xAxis, yAxis, width, height, margin, sticky }) => {\n  const frameProps = {\n    /* --- Data --- */\n    data,\n\n    /* --- Size --- */\n    size: [width, height],\n    margin: margin ? margin : 100,\n\n    /* --- Layout --- */\n    type: \"bar\",\n    projection: \"radial\",\n\n    /* --- Process --- */\n    oAccessor: xAxis,\n    rAccessor: yAxis,\n    rScaleType: scaleSqrt(),\n    oSort: (a, b, aData, bData) => bData[0][yAxis] - aData[0][yAxis],\n\n    /* --- Customize --- */\n    pieceClass: (d) => {\n      let myClass = d.type.toLowerCase();\n      if (d[yAxis] < 3) {\n        myClass += \" insignificant\";\n      }\n      return myClass;\n    },\n    baseMarkProps: {\n      transitionDuration: { default: 2000 },\n    },\n    renderKey: (datapoint) => datapoint.spell,\n\n    /* --- Interact --- */\n    hoverAnnotation: true,\n    tooltipContent: (d) => (\n      <Tooltip>\n        {d.summary[0].data[xAxis]} : {d.summary[0].data[yAxis]}\n      </Tooltip>\n    ),\n\n    /* --- Annotate --- */\n    // oLabel: {\n    //   orient: \"stem\",\n    //   padding: 5,\n    //   label: (d) => (\n    //     <text fill=\"white\" fontSize={12}>\n    //       {d}\n    //     </text>\n    //   ),\n    // },\n  };\n\n  return <Chart {...frameProps} $sticky={sticky} />;\n};\n\nexport default RadialChart;\n","const bookTitles = {\n  1: \"Harry Potter and the Sorcerer's Stone âš¡ï¸\",\n  2: \"Harry Potter and the Chamber of Secrets ðŸ\",\n  3: \"Harry Potter and the Prisoner of Azkaban â³\",\n  4: \"Harry Potter and the Goblet of Fire ðŸ†\",\n  5: \"Harry Potter and the Order of the Phoenix ðŸ”¥\",\n  6: \"Harry Potter and the Half-Blood Prince ðŸ§ª\",\n  7: \"Harry Potter and the Deathly Hallows â‹\",\n};\n\nexport default bookTitles;\n","import React, { useState, useEffect } from \"react\";\nimport { Scrollama, Step } from \"react-scrollama\";\nimport styled, { createGlobalStyle } from \"styled-components\";\nimport RadialChart from \"./data-viz/RadialChart.jsx\";\nimport spells from \"./data/spellCounts.json\";\nimport bookTitles from \"./data/bookTitles.js\";\nimport _ from \"lodash\";\n\nconst GlobalStyle = createGlobalStyle`\n  body {\n    background: #302f2c;\n    margin: 0;\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',\n      'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\n      sans-serif;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    color: white;\n  }\n\n  code {\n    font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New',\n      monospace;\n  }\n`;\n\nconst BookProgression = styled.div`\n  display: flex;\n  justify-content: center;\n`;\n\nconst Multiples = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n`;\n\nconst ScrollamaWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n`;\n\nconst StepWrapper = styled.div`\n  margin: 50vh 0;\n  font-size: 50px;\n`;\n\nconst MultipleWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n`;\n\nconst Title = styled.h3`\n  text-align: center;\n`;\n\nfunction App() {\n  const [book, setBook] = useState(null);\n\n  // Scroll to the top on render *smoooooothly*\n  useEffect(() => {\n    window.scrollTo({ top: 0, behavior: \"smooth\" });\n  }, []);\n\n  const onStepEnter = ({ data }) => {\n    setBook(data);\n  };\n\n  return (\n    <>\n      <GlobalStyle />\n      <BookProgression>\n        <ScrollamaWrapper>\n          <Scrollama onStepEnter={onStepEnter} offset={0.5}>\n            {_.range(1, 8).map((book) => (\n              <Step data={book} key={book}>\n                <StepWrapper>{book}</StepWrapper>\n              </Step>\n            ))}\n          </Scrollama>\n        </ScrollamaWrapper>\n        <div>\n          <RadialChart\n            data={spells[book]}\n            xAxis={\"spell\"}\n            yAxis={\"mentions\"}\n            width={window.innerWidth - 100}\n            height={window.innerHeight - 100}\n            sticky={true}\n          />\n        </div>\n      </BookProgression>\n\n      <Multiples>\n        {_.range(1, 8).map((book) => (\n          <MultipleWrapper>\n            <Title key={`title-${book}`}>{bookTitles[book]}</Title>\n            <RadialChart\n              key={`chart-${book}`}\n              data={spells[book]}\n              xAxis={\"spell\"}\n              yAxis={\"mentions\"}\n              width={500}\n              height={500}\n              sticky={false}\n              margin={50}\n            />\n          </MultipleWrapper>\n        ))}\n      </Multiples>\n    </>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}