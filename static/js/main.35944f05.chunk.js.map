{"version":3,"sources":["fonts/HarryP-Title.ttf","fonts/publico/PublicoText-Roman-Web.woff2","fonts/national/National2Web-Regular.woff","fonts/national/National2Web-Regular.woff2","data-viz/MovingPiece.jsx","data-viz/utils.js","data-viz/LegendRow.jsx","data-viz/Legend.jsx","hooks/useChartDimensions.js","data-viz/CustomRadialChart.jsx","article-sections/bookThoughts.js","article-sections/BookProgression.jsx","article-sections/SmallMultiples.jsx","article-sections/Header.jsx","fonts/fonts.js","styles.js","App.js","index.js"],"names":["module","exports","Title","styled","p","Effect","SeeMentions","Mentions","div","props","expanded","MovingPiece","data","pathA","pathB","mentions","setHoveredPiece","setMouseLocation","highlighted","useState","setExpanded","insignificant","animations","useSpring","config","duration","d","opacity","from","pieceClass","type","toLowerCase","tooltipTitle","spell","tooltipContent","effect","onClick","_","map","mention","i","key","arrowPointAtCenter","title","content","placement","className","path","stroke","mostMentions","get","maxBy","getPath","book","maxLength","orderBy","spells","numBars","length","findIndex","scale","scaleSqrt","domain","range","pieceData","find","arc","startAngle","Math","PI","endAngle","innerRadius","outerRadius","arcGenerator","getNullPath","LegendRow","dms","spellType","spellTypes","percentage","margin","marginBottom","circleX","width","circleY","percentAnimation","number","textAnimation","y","circleAnimation","cy","legendR","text","x","fill","interpolate","val","floor","circle","r","cx","Legend","totalMentions","sumBy","numberAnimation","total","mentionsByType","forEach","rankedSpellTypes","transform","marginLeft","height","marginTop","join","parseInt","toFixed","combineChartDimensions","dimensions","parsedDimensions","marginRight","boundedHeight","max","boundedWidth","useChartDimensions","passedSettings","ref","useRef","setWidth","setHeight","useEffect","element","current","resizeObserver","ResizeObserver","entries","Array","isArray","entry","contentRect","observe","unobserve","newSettings","ChartWrapper","Pieces","g","CustomRadialChart","fullData","currentBook","previousBook","highlightedSections","visibleSpells","previousSpells","entering","includes","min","1","2","3","4","5","6","7","writtenThoughts","ScrollamaWrapper","StepWrapper","Loading","BookTitle","h3","BookProgression","setBook","setPreviousBook","isEmpty","spellMentions","onStepEnter","direction","offset","Wrapper","DownArrow","ArrowheadDownOutline","Header","currentStep","setCurrentStep","set","style","display","flexDirection","createGlobalStyle","HarryPotterTitleFont","Publico","NationalWebWoff","NationalWebWoff2","GlobalStyle","AppWrapper","App","window","scrollTo","top","behavior","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.35944f05.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/HarryP-Title.181ef9a7.ttf\";","module.exports = __webpack_public_path__ + \"static/media/PublicoText-Roman-Web.5f2e0ae8.woff2\";","module.exports = __webpack_public_path__ + \"static/media/National2Web-Regular.dc4310e6.woff\";","module.exports = __webpack_public_path__ + \"static/media/National2Web-Regular.2414fbff.woff2\";","import React, { useState } from \"react\";\nimport styled from \"styled-components\";\nimport { animated, useSpring } from \"react-spring\";\nimport _ from \"lodash\";\nimport { Popover } from \"antd\";\n\nconst Title = styled.p`\n  color: #302f2c;\n  font-color: white;\n`;\n\nconst Effect = styled.p`\n  color: #302f2c;\n`;\n\nconst SeeMentions = styled.p`\n  font-size: 12px;\n  color: #1890ff;\n  text-decoration: underline;\n  &:hover {\n    cursor: pointer;\n  }\n`;\n\nconst Mentions = styled.div`\n  display: ${(props) => (props.expanded ? \"block\" : \"none\")};\n`;\n\nconst MovingPiece = ({\n  data,\n  pathA,\n  pathB,\n  setHoveredPiece,\n  setMouseLocation,\n  mentions,\n  highlighted,\n}) => {\n  const [expanded, setExpanded] = useState(false);\n\n  const insignificant = data.mentions < 3;\n\n  const animations = useSpring({\n    config: { duration: 1500 },\n    d: pathB,\n    opacity: insignificant ? 0.4 : 1,\n    from: { d: pathA, opacity: 0 },\n  });\n\n  const pieceClass = `${\n    insignificant ? \"insignificant \" : \"\"\n  }${data.type.toLowerCase()}`;\n\n  const tooltipTitle = (\n    <Title>\n      {data.spell} : {data.mentions}\n    </Title>\n  );\n\n  const tooltipContent = (\n    <div>\n      <Effect>{data.effect}</Effect>\n      <SeeMentions onClick={() => setExpanded(!expanded)}>\n        {expanded ? \"Hide mentions\" : \"See mentions\"}\n      </SeeMentions>\n      <Mentions expanded={expanded}>\n        {_.map(mentions, (mention, i) => (\n          <p key={i}>\"... {mention} ...\"</p>\n        ))}\n      </Mentions>\n    </div>\n  );\n\n  return (\n    <>\n      <Popover\n        arrowPointAtCenter={true}\n        title={tooltipTitle}\n        content={tooltipContent}\n        placement=\"bottom\"\n      >\n        <g className={pieceClass}>\n          <animated.path\n            {...animations}\n            stroke={highlighted ? \"white\" : null}\n          />\n        </g>\n      </Popover>\n    </>\n  );\n};\n\nexport default MovingPiece;\n","import _ from \"lodash\";\nimport spells from \"../data/spellCounts.json\";\nimport { arc } from \"d3-shape\";\nimport { scaleSqrt } from \"d3-scale\";\n\n// export const canvasWidth = 800;\n// export const canvasHeight = 800;\n// export const margin = 100;\n\nexport const labelHeight = 80;\nexport const labelWidth = 180;\nexport const labelRx = 10;\nexport const textSize = 14;\nexport const legendR = 10;\n\nexport const mostMentions = (data) => {\n  return _.get(\n    _.maxBy(data, (d) => d.mentions),\n    \"mentions\"\n  );\n};\n\nexport const getPath = (book, spell, maxLength) => {\n  const data = _.orderBy(spells[book], [\"mentions\"], [\"desc\"]);\n  const numBars = data.length;\n  const i = _.findIndex(data, { spell });\n\n  if (i === -1) return null;\n  const scale = scaleSqrt()\n    .domain([0, mostMentions(data)])\n    .range([0, maxLength / 2]);\n\n  const pieceData = _.find(data, { spell });\n\n  const arcGenerator = arc()\n    .startAngle(((Math.PI * 2) / numBars) * i)\n    .endAngle(((Math.PI * 2) / numBars) * (i + 1))\n    .innerRadius(0)\n    .outerRadius(scale(pieceData.mentions));\n\n  return arcGenerator();\n};\n\nexport const getNullPath = (book, spell) => {\n  const data = _.orderBy(spells[book], [\"mentions\"], [\"desc\"]);\n  const numBars = data.length;\n  const i = _.findIndex(data, { spell });\n\n  if (i === -1) return null;\n\n  const arcGenerator = arc()\n    .startAngle(((Math.PI * 2) / numBars) * i)\n    .endAngle(((Math.PI * 2) / numBars) * (i + 1))\n    .innerRadius(0)\n    .outerRadius(5);\n\n  return arcGenerator();\n};\n","import React from \"react\";\nimport { legendR } from \"./utils.js\";\nimport { animated, useSpring } from \"react-spring\";\n\nconst LegendRow = ({ dms, i, spellType, spellTypes, percentage }) => {\n  const margin =\n    (dms.marginBottom - spellTypes.length * legendR * 2) /\n    (spellTypes.length + 1);\n\n  const circleX = dms.width * 0.5;\n  const circleY =\n    i === 0\n      ? margin + legendR\n      : (margin + 2 * legendR) * i + (margin + legendR);\n\n  const percentAnimation = useSpring({\n    number: percentage,\n  });\n  const textAnimation = useSpring({\n    y: circleY,\n  });\n  const circleAnimation = useSpring({\n    cy: circleY - legendR / 2,\n  });\n\n  return (\n    <>\n      <animated.text\n        key={`${spellType}-percentage`}\n        x={circleX - (legendR + 50)}\n        y={textAnimation.y}\n        fill=\"white\"\n      >\n        {percentAnimation.number.interpolate((val) => Math.floor(val))}\n      </animated.text>\n      <animated.text\n        key={`${spellType}-percent`}\n        x={circleX - (legendR + 30)}\n        y={textAnimation.y}\n        fill=\"white\"\n      >\n        %\n      </animated.text>\n      <animated.circle\n        key={`${spellType}-circle`}\n        className={spellType}\n        r={legendR}\n        cx={circleX}\n        cy={circleAnimation.cy}\n      />\n      <animated.text\n        key={`${spellType}-label`}\n        x={circleX + legendR + 20}\n        y={textAnimation.y}\n        fill=\"white\"\n      >\n        {spellType}\n      </animated.text>\n    </>\n  );\n};\n\nexport default LegendRow;\n","import React from \"react\";\nimport _ from \"lodash\";\nimport { animated, useSpring } from \"react-spring\";\nimport LegendRow from \"./LegendRow.jsx\";\n\nconst Legend = ({ dms, data }) => {\n  const totalMentions = _.sumBy(data, \"mentions\");\n  const numberAnimation = useSpring({\n    total: totalMentions,\n  });\n\n  let mentionsByType = {};\n\n  const spellTypes = [\"charm\", \"spell\", \"jinx\", \"hex\", \"curse\", \"unforgivable\"];\n  spellTypes.forEach((spellType) => {\n    const mentions = _.sumBy(data, (d) => {\n      if (d.type.toLowerCase() === spellType) {\n        return d.mentions;\n      }\n      return 0;\n    });\n    mentionsByType[spellType] = mentions;\n  });\n\n  const rankedSpellTypes = _.orderBy(\n    spellTypes,\n    (type) => mentionsByType[type],\n    [\"desc\"]\n  );\n\n  return (\n    <g\n      transform={`translate(${[\n        dms.marginLeft,\n        dms.height + dms.marginTop - dms.marginBottom,\n      ].join(\",\")})`}\n    >\n      <text x={dms.width * 0.5 - 60} y={-20} fill=\"white\">\n        Total spell mentions =\n      </text>\n      <animated.text x={dms.width * 0.5 + 107} y={-20} fill=\"white\">\n        {numberAnimation.total.interpolate((val) => Math.floor(val))}\n      </animated.text>\n      {rankedSpellTypes.map((spellType, i) => (\n        <LegendRow\n          key={spellType}\n          dms={dms}\n          i={i}\n          spellType={spellType}\n          spellTypes={spellTypes}\n          percentage={parseInt(\n            ((mentionsByType[spellType] / totalMentions) * 100).toFixed()\n          )}\n        />\n      ))}\n    </g>\n  );\n};\n\nexport default Legend;\n","import { ResizeObserver } from \"@juggle/resize-observer\";\nimport { useRef, useState, useEffect } from \"react\";\n\nconst combineChartDimensions = (dimensions) => {\n  const parsedDimensions = {\n    ...dimensions,\n    marginTop: dimensions.marginTop || 0,\n    marginRight: dimensions.marginRight || 0,\n    marginBottom: dimensions.marginBottom || 0,\n    marginLeft: dimensions.marginLeft || 0,\n  };\n  return {\n    ...parsedDimensions,\n    boundedHeight: Math.max(\n      parsedDimensions.height -\n        parsedDimensions.marginTop -\n        parsedDimensions.marginBottom,\n      0\n    ),\n    boundedWidth: Math.max(\n      parsedDimensions.width -\n        parsedDimensions.marginLeft -\n        parsedDimensions.marginRight,\n      0\n    ),\n  };\n};\n\nconst useChartDimensions = (passedSettings) => {\n  const ref = useRef();\n  const dimensions = combineChartDimensions(passedSettings);\n  const [width, setWidth] = useState(0);\n  const [height, setHeight] = useState(0);\n\n  useEffect(() => {\n    if (dimensions.width && dimensions.height) return [ref, dimensions];\n    const element = ref.current;\n    const resizeObserver = new ResizeObserver((entries) => {\n      if (!Array.isArray(entries)) return;\n      if (!entries.length) return;\n      const entry = entries[0];\n      if (width != entry.contentRect.width) setWidth(entry.contentRect.width);\n      if (height != entry.contentRect.height)\n        setHeight(entry.contentRect.height);\n    });\n    resizeObserver.observe(element);\n    return () => resizeObserver.unobserve(element);\n  }, []);\n\n  const newSettings = combineChartDimensions({\n    ...dimensions,\n    width: dimensions.width || width,\n    height: dimensions.height || height,\n  });\n  return [ref, newSettings];\n};\n\nexport default useChartDimensions;\n","import React, { useState } from \"react\";\nimport styled from \"styled-components\";\nimport _ from \"lodash\";\nimport \"./CustomRadialChart.css\";\nimport MovingPiece from \"./MovingPiece.jsx\";\nimport Legend from \"./Legend.jsx\";\nimport { getPath, getNullPath } from \"./utils.js\";\nimport useChartDimensions from \"../hooks/useChartDimensions.js\";\n\nconst ChartWrapper = styled.div`\n  height: 85vh;\n  margin-right: 20px;\n  width: 90%;\n`;\n\nconst Pieces = styled.g`\n  transform: ${(props) =>\n    `translate(${props.boundedWidth / 2}px, ${props.boundedHeight / 2}px)`};\n`;\n\nconst CustomRadialChart = ({\n  fullData,\n  mentions,\n  currentBook,\n  previousBook,\n  highlightedSections,\n}) => {\n  const [hoveredPiece, setHoveredPiece] = useState(null);\n  const [mouseLocation, setMouseLocation] = useState(null);\n\n  const visibleSpells = _.map(fullData[currentBook], (d) => d.spell);\n  const previousSpells = _.map(fullData[previousBook], (d) => d.spell);\n\n  const chartSettings = { marginBottom: 200 };\n  const [ref, dms] = useChartDimensions(chartSettings);\n\n  return (\n    <ChartWrapper ref={ref}>\n      <svg height={dms.height} width={dms.width}>\n        <g\n          transform={`translate(${[dms.marginLeft, dms.marginTop].join(\",\")})`}\n        >\n          <Pieces\n            boundedWidth={dms.boundedWidth}\n            boundedHeight={dms.boundedHeight}\n          >\n            {_.map(fullData[currentBook], (d) => {\n              const entering =\n                visibleSpells.includes(d.spell) &&\n                !previousSpells.includes(d.spell);\n\n              return dms.height !== 0 && dms.width !== 0 ? (\n                <MovingPiece\n                  key={`${d.spell}${d.book}`}\n                  data={d}\n                  pathA={\n                    entering\n                      ? getNullPath(currentBook, d.spell)\n                      : getPath(\n                          previousBook,\n                          d.spell,\n                          _.min([dms.boundedWidth, dms.boundedHeight])\n                        )\n                  }\n                  pathB={getPath(\n                    currentBook,\n                    d.spell,\n                    _.min([dms.boundedWidth, dms.boundedHeight])\n                  )}\n                  setHoveredPiece={setHoveredPiece}\n                  setMouseLocation={setMouseLocation}\n                  mentions={mentions[currentBook][d.spell]}\n                  highlighted={\n                    highlightedSections\n                      ? highlightedSections.includes(d.spell)\n                      : false\n                  }\n                />\n              ) : null;\n            })}\n          </Pieces>\n        </g>\n        <Legend dms={dms} data={fullData[currentBook]} />\n      </svg>\n    </ChartWrapper>\n  );\n};\n\nexport default CustomRadialChart;\n","import React from \"react\";\n\nexport const highlightedSections = {\n  1: [\"Wingardium Leviosa\"],\n  2: [\"Expelliarmus\"],\n  3: [\"Expecto Patronum\", \"Riddikulus\"],\n  4: [\"Avada Kedavra\", \"Crucio\", \"Imperio\"],\n  5: [\n    \"Expelliarmus\",\n    \"Stupefy\",\n    \"Impedimenta\",\n    \"Petrificus Totalus\",\n    \"Reducto\",\n  ],\n  6: [\"Sectumsempra\", \"Levicorpus\"],\n  7: [\"Avada Kedavra\"],\n};\n\nexport const writtenThoughts = {\n  1: (\n    <>\n      <p>Turns out there's not actually that much magic in Book 1.</p>\n      <p>\n        The most uttered spell is <strong>Wingardium Leviosa</strong>, which\n        Harry, Ron, and Hermione learn in Charms class and later use to defeat a\n        troll.\n      </p>\n      <p>Hover over a spell to see where it's mentioned!</p>\n    </>\n  ),\n  2: (\n    <>\n      <p>\n        Harry's signature spell, <strong>Expelliarmus</strong>, makes its first\n        appearance in Book 2.\n      </p>\n    </>\n  ),\n  3: (\n    <>\n      <p>\n        It's not surprising to see signature Book 3 spells like{\" \"}\n        <strong>Expecto Patronum</strong> and <strong>Riddikulus</strong> at the\n        top.\n      </p>\n      <p>\n        This is also the only book that is absent of \"dark\" magical spells\n        (jinxes, hexes, or curses).\n      </p>\n    </>\n  ),\n  4: (\n    <>\n      <p>\n        Book 4 is noticably darker than the first 3 books, with 27% dark spells\n        (jinxes, hexes, or curses).\n      </p>\n      <p>\n        This book also has the first spottings of the 3 unforgivable curses,\n        which we learn about in class with \"Professor Moody.\"\n      </p>\n    </>\n  ),\n  5: (\n    <>\n      <p>\n        Book 5 features the first all-out battle of the series (The Battle of\n        the Department of Mysteries, the first major conflict of the Second\n        Wizarding War ü§ì).\n      </p>\n      <p>\n        Dumbledore's Army has been studying up on their dueling spells, and it\n        shows.\n      </p>\n    </>\n  ),\n  6: (\n    <>\n      <p>\n        The titular character (The Half-Blood Prince) created two of the most\n        used spells in this book (<strong>Sectumsempra</strong> and{\" \"}\n        <strong>Levicorpus</strong>).\n      </p>\n      <p>\n        Of the spells mentioned in this book, 30% are considered dark magic, the\n        highest percentage of any book in the series.\n      </p>\n    </>\n  ),\n  7: (\n    <>\n      <p>The final book has the most spell mentions of all the books (190!).</p>\n      <p>\n        <strong>Avada Kedavra</strong> is mentioned 7 times, the most since Book\n        4.\n      </p>\n    </>\n  ),\n};\n","import React, { useState } from \"react\";\nimport { Scrollama, Step } from \"react-scrollama\";\nimport styled from \"styled-components\";\nimport CustomRadialChart from \"../data-viz/CustomRadialChart.jsx\";\nimport spells from \"../data/spellCounts.json\";\nimport spellMentions from \"../data/spellMentions.json\";\nimport _ from \"lodash\";\nimport { writtenThoughts, highlightedSections } from \"./bookThoughts.js\";\nimport { useSpring } from \"react-spring\";\n\nconst ChartWrapper = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  width: 100%;\n  position: sticky;\n  top: 10%;\n`;\n\nconst ScrollamaWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  align-self: flex-start;\n  margin-left: 50px;\n`;\n\nconst StepWrapper = styled.div`\n  margin: 50vh 0;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 200px;\n`;\n\nconst Loading = styled.div`\n  margin-top: 40px;\n`;\n\nconst BookTitle = styled.h3`\n  font-size: 1.6em;\n`;\n\nconst BookProgression = () => {\n  const [book, setBook] = useState(1);\n  const [previousBook, setPreviousBook] = useState(0);\n\n  const onStepEnter = ({ data, direction }) => {\n    if (direction === \"up\") setPreviousBook(data + 1);\n    else if (direction === \"down\") setPreviousBook(data - 1);\n    setBook(data);\n  };\n\n  return !_.isEmpty(spells[book]) ? (\n    <>\n      <ChartWrapper>\n        <CustomRadialChart\n          fullData={spells}\n          mentions={spellMentions}\n          currentBook={book}\n          previousBook={previousBook}\n          highlightedSections={_.get(highlightedSections, book)}\n        />\n      </ChartWrapper>\n\n      <ScrollamaWrapper>\n        <Scrollama onStepEnter={onStepEnter} offset={0.7}>\n          {_.range(1, 8).map((book) => (\n            <Step data={book} key={book}>\n              <StepWrapper>\n                <BookTitle>Book {book}</BookTitle>\n                <div>{writtenThoughts[book]}</div>\n              </StepWrapper>\n            </Step>\n          ))}\n        </Scrollama>\n      </ScrollamaWrapper>\n    </>\n  ) : (\n    <Loading>Loading...</Loading>\n  );\n};\n\nexport default BookProgression;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport CustomRadialChart from \"../data-viz/CustomRadialChart.jsx\";\nimport spells from \"../data/spellCounts.json\";\nimport bookTitles from \"../data/bookTitles.js\";\nimport _ from \"lodash\";\n\nconst Wrapper = styled.div`\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  justify-content: center;\n`;\n\nconst MultipleWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n`;\n\nconst Title = styled.h3`\n  text-align: center;\n`;\n\nconst SmallMultiples = () => {\n  return (\n    <Wrapper>\n      {_.range(1, 8).map((book) => (\n        <MultipleWrapper key={book}>\n          <Title key={`title-${book}`}>{bookTitles[book]}</Title>\n          <CustomRadialChart\n            key={`chart-${book}`}\n            data={spells[book]}\n            xAxis={\"spell\"}\n            yAxis={\"mentions\"}\n            width={500}\n            height={500}\n            sticky={false}\n            margin={50}\n          />\n        </MultipleWrapper>\n      ))}\n    </Wrapper>\n  );\n};\n\nexport default SmallMultiples;\n","import React, { useState } from \"react\";\nimport styled from \"styled-components\";\nimport { animated, useSpring } from \"react-spring\";\nimport { Scrollama, Step } from \"react-scrollama\";\nimport { ArrowheadDownOutline } from \"@styled-icons/evaicons-outline/ArrowheadDownOutline\";\n\nconst Wrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-top: 50px;\n  height: 100vh;\n`;\n\nconst DownArrow = styled(ArrowheadDownOutline)`\n  height: 40px;\n  margin-top: 15px;\n`;\n\nconst Header = () => {\n  const [currentStep, setCurrentStep] = useState(0);\n\n  const [props, set, stop] = useSpring(() => ({ opacity: 1 }));\n\n  const onStepEnter = ({ data }) => {\n    setCurrentStep(data);\n  };\n\n  set({ opacity: currentStep === 3 ? 0 : 1 });\n\n  return (\n    <Wrapper>\n      <Scrollama onStepEnter={onStepEnter} offset={0.2}>\n        <Step data={0} key={0}>\n          <h1>\"It's LeviOsa, not LevioSA!\"</h1>\n        </Step>\n        <Step data={1} key={1}>\n          <h2>\n            ‚ö°Ô∏è Visualizing the spells mentioned across the Harry Potter series\n            ‚ö°Ô∏è\n          </h2>\n        </Step>\n        <Step data={2} key={2}>\n          <h3>By Michelle McGhee</h3>\n        </Step>\n        <Step data={3} key={3}>\n          <animated.div\n            style={{\n              display: \"flex\",\n              flexDirection: \"column\",\n              marginTop: \"100px\",\n              ...props,\n            }}\n          >\n            <div>Scroll to advance the story</div>\n            <DownArrow />\n          </animated.div>\n        </Step>\n      </Scrollama>\n    </Wrapper>\n  );\n};\n\nexport default Header;\n","import { createGlobalStyle } from \"styled-components\";\nimport HarryPotterTitleFont from \"./HarryP-Title.ttf\";\nimport Publico from \"./publico/PublicoText-Roman-Web.woff2\";\nimport NationalWebWoff from \"./national/National2Web-Regular.woff\";\nimport NationalWebWoff2 from \"./national/National2Web-Regular.woff2\";\n\nexport default createGlobalStyle`\n  @font-face {\n    font-family: 'Harry Potter Title';\n    src: url(${HarryPotterTitleFont});\n    font-weight: 300;\n    font-style: normal;\n  }\n\n  @font-face {\n    font-family: 'Publico';\n    src: url(${Publico});\n    font-weight: 300;\n    font-style: normal;\n  }\n\n  @font-face {\n    font-family: 'National 2 Web';\n    src: url(${NationalWebWoff}) format('woff2'), url(${NationalWebWoff2}) format('woff');\n    font-weight: 300;\n    font-style: normal;\n  }\n`;\n","import styled, { createGlobalStyle } from \"styled-components\";\n\nexport const GlobalStyle = createGlobalStyle`\n  h1 {\n    font-family: \"Harry Potter Title\";\n    font-size: 4em;\n    color: white;\n  }\n\n  h2 {\n    color: white;\n  }\n\n  h3 {\n    color: white;\n  }\n\n  body {\n    background: #302f2c;\n    margin: 0;\n    font-family: 'National 2 Web', 'Helvetica Neue', sans-serif;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    color: white;\n  }\n\n  code {\n    font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New',\n      monospace;\n  }\n`;\n","import React, { useEffect } from \"react\";\nimport styled, { createGlobalStyle } from \"styled-components\";\nimport BookProgression from \"./article-sections/BookProgression.jsx\";\nimport SmallMultiples from \"./article-sections/SmallMultiples.jsx\";\nimport Header from \"./article-sections/Header.jsx\";\nimport GlobalFonts from \"./fonts/fonts\";\nimport \"./App.css\";\nimport { GlobalStyle } from \"./styles.js\";\n\nconst AppWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n`;\n\nfunction App() {\n  // Scroll to the top on render *smoooooothly*\n  useEffect(() => {\n    window.scrollTo({ top: 0, behavior: \"smooth\" });\n  }, []);\n\n  return (\n    <>\n      <GlobalStyle />\n      <GlobalFonts />\n\n      <AppWrapper>\n        <Header />\n        <BookProgression />\n        {/* <SmallMultiples /> */}\n      </AppWrapper>\n    </>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}